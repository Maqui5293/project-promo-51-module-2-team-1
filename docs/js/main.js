const n=[document.querySelector("#title"),document.querySelector("#autor"),document.querySelector("#gender"),document.querySelector("#rate"),document.querySelector("#user")];function x(){var t,o,a,r,m;const e={title:((t=n[0])==null?void 0:t.value)||"",autor:((o=n[1])==null?void 0:o.value)||"",gender:((a=n[2])==null?void 0:a.value)||"",rate:((r=n[3])==null?void 0:r.value)||"",user:((m=n[4])==null?void 0:m.value)||""};localStorage.setItem("formData",JSON.stringify(e))}function I(){const e=localStorage.getItem("formData");if(e){const t=JSON.parse(e);n[0]&&(n[0].value=t.title||""),n[1]&&(n[1].value=t.autor||""),n[2]&&(n[2].value=t.gender||""),n[3]&&(n[3].value=t.rate||""),n[4]&&(n[4].value=t.user||"")}}n.forEach(e=>{e&&e.addEventListener("input",x)});window.addEventListener("DOMContentLoaded",I);const s=document.querySelector(".js_inputTitle"),c=document.querySelector(".js_inputAutor"),l=document.querySelector(".js_inputGender"),u=document.querySelector(".js_inputRate"),d=document.querySelector(".js_inputUserName"),S=document.querySelector(".js_buttonSubmit"),q=document.querySelector(".js_previewTitle"),j=document.querySelector(".js_previewAutor"),C=document.querySelector(".js_previewGender"),b=document.querySelector(".js_previewRate"),L=document.querySelector(".js_previewUserName");function D(e){let t="";e==1?t="⭐":e==2?t="⭐⭐":e==3?t="⭐⭐⭐":e==4?t="⭐⭐⭐⭐":(e==5,t="⭐⭐⭐⭐⭐"),b.textContent=t}function p(){q.textContent=s.value||"Título del libro",j.textContent=c.value||"Autor/a",C.textContent=l.value||"Género",L.textContent=d.value||"Nombre y apellidos",D(u.value)}s&&s.addEventListener("input",p);c&&c.addEventListener("input",p);l&&l.addEventListener("input",p);u&&u.addEventListener("input",p);d&&d.addEventListener("input",p);function A(){return{field1:1,field2:s.value,field3:c.value,field4:l.value,field5:u.value,field6:d.value,photo:window.photo}}function T(e){e.preventDefault();const t=A();fetch("https://dev.adalab.es/api/info/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(o=>o.json()).then(o=>{if(console.log("Respuesta del servidor:",o),o.success){const a=o.infoID;console.log("UUID generado:",a),window.location.href=`./card.html?id=${a}`}else console.error("Error al crear la tarjeta:",o.error)})}S&&S.addEventListener("click",T);const _=document.querySelectorAll(".js_toggle");for(const e of _)e.addEventListener("click",t=>{const o=e.nextElementSibling,a=o.classList.contains("is-open");for(const r of _){r.nextElementSibling.classList.remove("is-open");const v=r.querySelector(".form__section-title");v&&(v.textContent=v.textContent.replace("⬆️","⬇️"))}if(!a){o.classList.add("is-open");const r=e.querySelector(".form__section-title");r&&(r.textContent=r.textContent.replace("⬇️","⬆️"))}});const h=document.querySelector(".js_cardPreview"),k=document.querySelectorAll(".js-fondo-radio");k.forEach(e=>{e.addEventListener("change",t=>{const o=t.target.value;h.classList.remove("romance","misterio","poesia","fantasia","cienciaficcion"),h.classList.add(o)})});const w=document.querySelector(".js_resetBtn");function R(){s.value="",c.value="",l.value="",u.value="",d.value="",q.textContent="",j.textContent="",C.textContent="",b.textContent="",L.textContent="",i.removeAttribute("style"),y.removeAttribute("style"),g.value=""}w&&w.addEventListener("click",R);window.photo="";const g=document.querySelector(".js__profile-upload-btn"),y=document.querySelector(".js__profile-preview"),i=document.querySelector(".js__profile-image"),f=new FileReader;function $(){y.style.backgroundImage=`url(${f.result})`,console.log("Imagen cargada:",f.result)}function U(){window.photo=f.result,i.style.backgroundImage=`url(${window.photo})`,i.style.backgroundSize="cover",i.style.backgroundPosition="center",i.style.backgroundRepeat="no-repeat",$()}function N(e){const t=e.currentTarget.files[0];t?(f.addEventListener("load",U,{once:!0}),f.readAsDataURL(t)):(i.style.backgroundImage="",y.style.backgroundImage="")}g&&g.addEventListener("change",N);const E=document.querySelector(".js_card");if(E){const t=new URLSearchParams(window.location.search).get("id");fetch(`https://dev.adalab.es/api/info/${t}`).then(o=>o.json()).then(o=>{o.success?P(o.data):console.error("Error al obtener la tarjeta:",o.error)}).catch(o=>{console.error("Error en la petición:",o)})}function P(e){E.innerHTML=`
    <article class="card__preview">
      <h2 class="card__title">${e.field2}</h2>               <!-- Título -->
      <p class="card__author">${e.field3}</p>                <!-- Autor -->
      <p class="card__gender">${e.field4}</p>                <!-- Género -->
      <p class="card__stars">${"⭐".repeat(e.field5)}</p>     <!-- Valoración -->
      <img class="card__image" src="${e.photo}" alt="Imagen del libro o recomendación"/> <!-- Imagen -->
      <p class="card__user">Recomendado por: ${e.field6}</p> <!-- Usuario -->
    </article>
  `}
//# sourceMappingURL=main.js.map
